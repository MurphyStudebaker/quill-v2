# Migration `20200708194312-add-snaps`

This migration has been generated by MurphyStudebaker at 7/8/2020, 7:43:12 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
PRAGMA foreign_keys=OFF;

CREATE TABLE "quaint"."new_Poem" (
"authorId" INTEGER NOT NULL  ,"body" TEXT NOT NULL  ,"id" INTEGER NOT NULL  PRIMARY KEY AUTOINCREMENT,"published" BOOLEAN NOT NULL DEFAULT false ,"snaps" INTEGER NOT NULL DEFAULT 0 ,"title" TEXT NOT NULL  ,FOREIGN KEY ("authorId") REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE)

INSERT INTO "quaint"."new_Poem" ("authorId", "body", "id", "published", "title") SELECT "authorId", "body", "id", "published", "title" FROM "quaint"."Poem"

PRAGMA foreign_keys=off;
DROP TABLE "quaint"."Poem";;
PRAGMA foreign_keys=on

ALTER TABLE "quaint"."new_Poem" RENAME TO "Poem";

PRAGMA "quaint".foreign_key_check;

PRAGMA foreign_keys=ON;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200630203739-added-created-at..20200708194312-add-snaps
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource DS {
   provider = "sqlite"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider      = "prisma-client-js"
@@ -11,14 +11,13 @@
 // Define your own datamodels here and run `yarn redwood db save` to create
 // migrations for them.
 // TODO: Please remove the following example:
 model User {
-  id        Int      @id @default(autoincrement())
-  email     String   @unique
-  createdAt DateTime @default(now())
-  name      String?
-  profile   Profile?
-  poems     Poem[]
+  id      Int      @id @default(autoincrement())
+  email   String   @unique
+  name    String?
+  profile Profile?
+  poems   Poem[]
 }
 model Profile {
   id     Int    @id @default(autoincrement())
@@ -28,15 +27,15 @@
 }
 model Poem {
   id         Int        @id @default(autoincrement())
-  createdAt  DateTime   @default(now())
   title      String
   body       String
   published  Boolean    @default("false")
   author     User       @relation(fields: [authorId], references: [id])
   authorId   Int
   categories Category[] @relation(references: [id])
+  snaps      Int        @default(0)
 }
 model Category {
   id    Int    @id @default(autoincrement())
```


